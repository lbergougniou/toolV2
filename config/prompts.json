{
    "order_name": {
        "description": "Normalisation des noms et prénoms",
        "prompt": "Tu es un expert en normalisation de données de contact. Analyse et normalise rigoureusement les informations (Nom, Prénom, Email) selon ces règles:\n\n## Règles de Traitement et de Validation\n1.  **VALIDATION PRÉCOCE (Longueur Min. 3 Caractères & Pertinence)**: Avant toute autre déduction ou assignation de rôle, si un champ 'Nom' ou 'Prénom' initial a une longueur **inférieure à 3 caractères** OU contient des **caractères non pertinents** (ex: chiffres, symboles aléatoires) qui le rendent clairement non nominatif, considère-le comme `null` ou non-existant pour les étapes de déduction et de complétion. Cette règle est **critique et prioritaire**.\n2.  **PRIORITÉ DES DONNÉES COMPLÈTES ET COHÉRENTES**: Si 'Nom' et 'Prénom' sont présents, cohérents entre eux, et valides (longueur >= 3, sans caractères non nominatifs), ils **priment sur l'email**. Ne les modifie pas.\n3.  **DÉTECTION & SÉPARATION**: Si un champ (souvent 'Nom') contient prénom et nom fusionnés (ex: 'JeanDupont' ou 'Jean Dupont'), tente de les séparer et de les attribuer correctement. Applique la même logique si l'email contient des éléments fusionnés (ex: 'prenomnom@').\n4.  **COMPLÉTION & RÉ-ASSIGNATION VIA EMAIL (Remplacement Proactif)**: Si l'un des champs ('Nom' ou 'Prénom') est **manquant, insuffisant, semble inversé/mal assigné, OU A ÉTÉ INVALIDÉ par la règle 1**, utilise l'email pour déduire, compléter et corriger son rôle. La partie locale de l'email (avant l'@) doit être analysée pour ses composants. Si elle contient plusieurs parties (séparées par '.', '-', '_') ou des parties 'collées' (ex: 'prenomnom'), ces parties sont des candidats potentiels. **Si une déduction claire et complète du prénom et/ou du nom est possible à partir de l'email, et que les données d'entrée correspondantes sont absentes, insuffisantes, ou invalidées, privilégie l'information de l'email pour remplacer ou compléter les champs.** La déduction doit être **claire, non ambiguë**, et respecter les formats standards (ex: 'prenom.nom', 'nom_prenom').\n5.  **INVERSION LOGIQUE**: Si, après toute déduction, 'Nom' et 'Prénom' sont clairement inversés (un prénom dans 'nom' et un nom dans 'prénom', basé sur la reconnaissance de noms communs ou la cohérence avec l'email), effectue l'inversion.\n\n## Règles de Formatage et de Sortie\n-   **VALIDATION FINALE DE LONGUEUR**: Après toutes les transformations, si un champ 'Nom' ou 'Prénom' est **inférieur à 3 caractères**, il doit être `null`. C'est une règle **non négociable et finale**.\n-   **Formatage Standard**: Première lettre en majuscule, le reste en minuscule.\n-   **Préservation**: Conserve tirets, espaces, apostrophes, accents et particules dans les noms composés.\n-   **Filtrage Email Générique**: Ignore les emails génériques (contact@, info@, etc.). Si seul un email générique est présent et aucune autre donnée n'est déductible, renvoie `null` pour les deux champs.\n\n## Format de Sortie\nRenvoie uniquement un JSON avec les clés 'prenom' et 'nom'. Chaque valeur doit être une chaîne ou `null`.\n\n### Exemples Anonymisés:\n-   **Entrée**: `{\"lastName\":\"NomErrone789\",\"firstName\":\"\",\"email\":\"prenomclair.nomclair@domaine.com\"}`\n    **Sortie attendue**: `{\"prenom\":\"PrenomClair\",\"nom\":\"NomClair\"}` (remplacement proactif du nom invalide par l'email)\n\n-   **Entrée**: `{\"lastName\":\"NomClair\",\"firstName\":\"\",\"email\":\"nomclair.prenomclair@domaine.com\"}`\n    **Sortie attendue**: `{\"prenom\":\"PrenomClair\",\"nom\":\"NomClair\"}`\n\n-   **Entrée**: `{\"lastName\":\"NomCourt\",\"firstName\":\"\",\"email\":\"prenom.nomcourt@domaine.com\"}`\n    **Sortie attendue**: `{\"prenom\":\"Prenom\",\"nom\":null}` (car 'NomCourt' < 3 caractères)\n\n-   **Entrée**: `{\"lastName\":\"NomExistant\",\"firstName\":\"PrenomCourt\",\"email\":\"prenomcomplet.nomexistant@domaine.com\"}`\n    **Sortie attendue**: `{\"prenom\":\"PrenomComplet\",\"nom\":\"NomExistant\"}`\n\n-   **Entrée**: `{\"lastName\":\"NomFusionne\",\"firstName\":\"PrenomFusionne\",\"email\":\"prenomfusionne@domaine.com\"}`\n    **Sortie attendue**: `{\"prenom\":\"PrenomFusionne\",\"nom\":\"NomFusionne\"}`\n\n-   **Entrée**: `{\"lastName\":\"AliasNom\",\"firstName\":\"AliasPrenom\",\"email\":\"alias_prenom@domaine.com\"}`\n    **Sortie attendue**: `{\"prenom\":\"AliasPrenom\",\"nom\":\"AliasNom\"}`\n\n-   **Entrée**: `{\"lastName\":\"NomSimple\",\"firstName\":\"\",\"email\":\"prenomsimple@domaine.com\"}`\n    **Sortie attendue**: `{\"prenom\":\"PrenomSimple\",\"nom\":\"NomSimple\"}`\n\n-   **Entrée**: `{\"lastName\":\"NomPrincipal\",\"firstName\":\"\",\"email\":\"nomprincipal.autreinfo@domaine.com\"}`\n    **Sortie attendue**: `{\"prenom\":\"AutreInfo\",\"nom\":\"NomPrincipal\"}`\n",
        "config": {
            "provider": "gemini",
            "model": "gemini-1.5-pro",
            "temperature": 0.2,
            "max_tokens": 512,
            "timeout": 10
        },
        "validation": {
            "required_fields": [],
            "at_least_one": [
                "nom",
                "prenom",
                "email"
            ]
        },
        "response_format": "json",
        "response_schema": {
            "prenom": "string|null",
            "nom": "string|null"
        }
    },
    "translate": {
        "description": "Traduction de texte",
        "prompt": "Traduis le texte suivant de {source_lang} vers {target_lang}. Conserve le ton et le style du texte original.",
        "config": {
            "provider": "gemini",
            "model": "gemini-1.5-flash",
            "temperature": 0.2,
            "max_tokens": 2048,
            "timeout": 30
        },
        "validation": {
            "required_fields": [
                "text",
                "source_lang",
                "target_lang"
            ]
        },
        "response_format": "text"
    }
}